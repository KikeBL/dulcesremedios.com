---
import Product from "@/components/elements/Product.astro";
import Facebook from "@/components/icons/Facebook.astro";
import Instagram from "@/components/icons/Instagram.astro";
import Mail from "@/components/icons/Mail.astro";
import Phone from "@/components/icons/Phone.astro";
import Whatsapp from "@/components/icons/Whatsapp.astro";

import Home from "@/components/icons/Home.astro";
import Photo from "@/components/icons/Photo.astro";
import Store from "@/components/icons/Store.astro";
import Comments from "@/components/icons/Comments.astro";

import { getAllProducts } from "src/scripts/notion";
const products = await getAllProducts();
---

<section class="fixed w-full top-0 left-0 z-10 shadow-md">
  <nav
    class="relative bg-center bg-[url('public/backgrounds/LandingHeader.webp')]"
  >
    <div class="absolute inset-0 w-full h-full bg-opacity-60 bg-back-pink">
    </div>
    <div
      id="headertop"
      class="md:flex flex-col items-center w-full hidden p-4 gap-4"
    >
      <a
        href="https://www.dulcesremedios.es/"
        class="flex items-center space-x-3 rtl:space-x-reverse"
      >
        <span class="text-main-brown text-6xl font-[quicksand] z-10 font-thin"
          >Dulces Remedios</span
        >
      </a>

      <!--SECTION - Menu de cabecera -->
      <div
        class="items-center justify-between font-medium hidden w-full md:flex md:w-auto"
      >
        <ul
          class="flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 z-10"
        >
          <li>
            <a
              href="maintenance"
              class="flex p-4 text-main-brown text-lg"
              aria-current="page"
            >
              <Home />
              Inicio
            </a>
          </li>

          <li>
            <a
              href="maintenance"
              class="flex p-4 text-main-brown text-lg"
              aria-current="page"
            >
              <Photo />
              Fotos
            </a>
          </li>

          <li
            id="mega-menu-full-dropdown-button"
            data-collapse-toggle="mega-menu-full-dropdown"
            class="flex p-4 text-main-brown cursor-pointer text-lg"
          >
            <Store />
            Productos
          </li>

          <li>
            <a
              href="maintenance"
              class="flex p-4 text-main-brown text-lg"
              aria-current="page"
            >
              <Comments />
              Pedidos y sugerencias
            </a>
          </li>
        </ul>
      </div>

      <div class="flex flex-row gap-4 z-10">
        <Facebook />
        <Instagram />
        <Mail />
        <Phone />
        <Whatsapp />
      </div>
    </div>
    <!--SECTION - DESPLEGABLE -->
    <div
      id="mega-menu-full-dropdown"
      class="hidden h-[92%] w-full md:h-[60%] md:w-11/12 fixed z-20 rounded mx-auto md:inset-x-0 border-gray-200 shadow-sm border-y bg-white bg-[radial-gradient(#f3dfe1_1px,transparent_1px)] [background-size:16px_16px] md:top-36"
    >
      <div class="flex p-2 relative h-full pb-4">
        <div
          id="podructslist"
          class="w-full md:w-9/12 lg:w-10/12 flex flex-wrap overflow-y-scroll h-full gap-3 lg:gap-6 justify-center pb-4"
        >
          {
            products.map((cake) => (
              <Product
                titulo={cake.producto}
                excerpt={cake.excerpt}
                cover={cake.cover}
              />
            ))
          }
        </div>
        <div
          class="w-3/12 lg:w-2/12 hidden md:flex md:flex-col h-full p-2 pl-4 gap-4 border-l border-main-brown text-main-brown font-[quicksand] text-lg"
        >
          <a href="maintenance"
            ><span class="hover:font-bold cursor-pointer"
              >Todas nuestras creaciones</span
            ></a
          >
          <span class="hover:font-bold cursor-pointer">Especial para ti</span>
          <span class="hover:font-bold cursor-pointer">Tartas que enamoran</span
          >
          <span class="hover:font-bold cursor-pointer"
            >Todo por el chocolate</span
          >
          <span class="hover:font-bold cursor-pointer">Los más enrollados</span>
          <span class="hover:font-bold cursor-pointer">Clásicos remedios</span>
          <span class="hover:font-bold cursor-pointer">Saborea el mundo</span>
          <span class="hover:font-bold cursor-pointer">El bocado dulce</span>
          <span class="hover:font-bold cursor-pointer">Solo para ti</span>
          <span class="hover:font-bold cursor-pointer">Tartas de queso</span>
          <span class="hover:font-bold cursor-pointer">En modo navideño</span>
        </div>
      </div>
    </div>
  </nav>
</section>

<style>
  #podructslist {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  #podructslist::-webkit-scrollbar {
    display: none;
  }

  #headertop {
    animation: navmenu linear both;
    animation-timeline: scroll(root block);
    animation-range: 0 300px;
  }
  @keyframes navmenu {
    to {
      background: #f3dfe1;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
    }
  }
</style>
